app:
  frontend-url: https://financial-advisor-beta.vercel.app
spring:
  application:
    name: financial-advisor-backend

  profiles:
    active: ${SPRING_PROFILES_ACTIVE:dev}

  datasource:
    url: ${DATABASE_URL}
    username: ${DATABASE_USERNAME}
    password: ${DATABASE_PASSWORD}
    driver-class-name: org.postgresql.Driver

  jpa:
    hibernate:
      ddl-auto: update
    show-sql: false
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true

  security:
    oauth2:
      client:
        registration:
          google:
            client-id: ${GOOGLE_CLIENT_ID}
            client-secret: ${GOOGLE_CLIENT_SECRET}
            scope:
              - email
              - profile
              - https://www.googleapis.com/auth/gmail.readonly
              - https://www.googleapis.com/auth/gmail.send
              - https://www.googleapis.com/auth/calendar
              - https://www.googleapis.com/auth/calendar.events
            redirect-uri: "https://ai-financial-agent.onrender.com/login/oauth2/code/google"
            authorization-grant-type: authorization_code
        provider:
          google:
            authorization-uri: https://accounts.google.com/o/oauth2/v2/auth?access_type=offline&prompt=consent
            token-uri: https://oauth2.googleapis.com/token
            user-info-uri: https://www.googleapis.com/oauth2/v2/userinfo
            user-name-attribute: email

  ai:
    openai:
      api-key: ${OPENAI_API_KEY}

openai:
  api-key: ${OPENAI_API_KEY}
  embedding:
    model: text-embedding-ada-002  # or text-embedding-3-small for better performance
    max-chunk-size: 6000  # characters
    chunk-overlap: 200

server:
  port: ${PORT:8085}

email:
  indexing:
    max-emails: 100      # limit emails processed per batch
    content-limit: 6000  # max characters per email content

management:
  endpoints:
    web:
      exposure:
        include: health,info

hubspot:
  client-id: ${HUBSPOT_CLIENT_ID}
  client-secret: ${HUBSPOT_CLIENT_SECRET}
  redirect-uri: ${HUBSPOT_REDIRECT_URI}

jwt:
  secret: ${JWT_SECRET}
  expiration: 86400000

# Webhook URLs for push notifications
webhook:
  base:
    url: ${WEBHOOK_BASE_URL}
  gmail:
    url: ${webhook.base.url}/api/webhooks/gmail
  calendar:
    url: ${webhook.base.url}/api/webhooks/calendar
  hubspot:
    url: ${webhook.base.url}/api/webhooks/hubspot

logging:
  level:
    com.advisor: INFO
    root: INFO

---
spring:
  config:
    activate:
      on-profile: heroku

  datasource:
    url: ${DATABASE_URL}

  jpa:
    hibernate:
      ddl-auto: validate
    show-sql: false

server:
  port: ${PORT}

logging:
  level:
    com.advisor: INFO
